name: mswegnn
channels:
  - pytorch      # <-- Highest priority for PyTorch
  - pyg          # <-- For pyg
  - conda-forge  # <-- For everything else
  - nodefaults   # <-- Critical: blocks pkgs/main
dependencies:
  # --- Core ---
  # We specify conda-forge for these base packages
  - conda-forge::python=3.10
  - conda-forge::pip

  # --- ML Stack (CPU-Forced) ---
  # This is the new, critical part.
  # We get PyTorch from its own channel and add 'cpuonly'.
  - pytorch::pytorch
  - pytorch::cpuonly      # <-- This package FORCES a CPU build
  
  # PyG will see the CPU-only torch and install its own CPU versions
  - pyg::pyg
  - pyg::pytorch-scatter
  - pyg::pytorch-sparse

  # Lightning will also respect the CPU-only PyTorch
  - conda-forge::lightning

  # --- Science Stack (UN-PINNED) ---
  # Let conda-forge find the latest versions that work with Py 3.10
  - conda-forge::numpy
  - conda-forge::scipy
  - conda-forge::pandas
  - conda-forge::scikit-learn
  - conda-forge::numba
  - conda-forge::netcdf4
  - conda-forge::xarray
  - conda-forge::fiona
  - conda-forge::shapely

  # --- Pip ---
  # This section was fine
  - pip:
    - UGrid==0.13.0
    - -e .
    - matplotlib
    - ipykernel
    - tqdm
    - seaborn
    - pytest
    - triangle
    - wandb
    - sithom